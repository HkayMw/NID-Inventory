#:kivy 2.3.0
# view/main_view.kv

<MainScreen>:
    id: main_screen
    orientation: "horizontal"

    # # Side Navigation Rail
    # ScreenManager:
    #     id: side_nav
    #     name: 'side_nav'
    #     size_hint_x: 0
    #     width: 0
        
    # Main Window
    MDBoxLayout:
        id: main_window
        orientation: "vertical"

        # Header Section
        MDBoxLayout:
            size_hint_y: .14
            pos_hint: {'x': 0, 'y': 0}
            md_bg_color: app.theme_cls.primary_color

            MDBoxLayout:
                size_hint_x: .74

                MDBoxLayout:
                    id: logo
                    size_hint_x: .07
                    pos_hint: {'x':0, 'center_y': .5}

                    Image:
                        source: 'malawi_emblem.png'
                        keep_ratio: True

                MDLabel:
                    id: header_label
                    text: "[b]ID Inventory Manager[/b]"
                    markup: True  # Enable markup for styling
                    halign: 'left'
                    color: app.theme_cls.primary_color
                    padding: [20, 5]
                    valign: 'middle'
                    font_style: 'H4'
                    # size_hint_y: None
                    size_hint_x: .93
                   
            #User info
            MDBoxLayout:
                # id: user
                # size_hint_x: .26
                size_hint_x: None
                width: '350dp'

                MDCard:
                    id: user
                    md_bg_color: app.theme_cls.primary_color
                    size_hint_x: .85
                
                MDIconButton:
                    icon: 'weather-night'
                    id: theme_icon
                    user_font_size: "64sp"
                    pos_hint: {"center_x": .5, "center_y": .5}
                    theme_text_color: "Primary"
                    size_hint_x: .15
                    on_release:
                        app.theme_cls.theme_style = 'Dark' if app.theme_cls.theme_style == 'Light' else 'Light'
                        theme_icon.icon = 'weather-night' if self.icon == 'weather-sunny' else 'weather-sunny'
                        # theme_icon.text_color = (1, 1, 1, 1) if self.active else (0, 0, 0, 1)


        # horizontal line
        MDSeparator:
            height: "1dp"  # Thickness of the line
            color: "#B0BEC5"  # Color of the line

        MDBoxLayout:
            orientation: "horizontal"

            # Side Navigation Rail
            ScreenManager:
                id: side_nav
                name: 'side_nav'
                size_hint_x: 0
                width: 0

            # Main Section
            ScreenManager:
                id: screen_manager
                name: 'screen_manager'
                # size_hint_x: 1
        
        # horizontal line
        MDSeparator:
            height: "1dp"  # Thickness of the line
            color: "#B0BEC5"  # Color of the line

        # Footer
        MDBoxLayout:
            orientation: "horizontal"
            id: footer
            size_hint_y: .1
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            md_bg_color: app.theme_cls.bg_normal
            spacing: 20
            # md_bg_color: app.theme_cls.bg_dark


                # font_size: min(self.width * .6, self.height * .6)

            # MDSpinner:
            #     id: progress
            #     size_hint: None, None
            #     size: dp(46), dp(46)
            #     pos_hint: {'center_x': .5, 'center_y': .5}
            #     padding: [20]
            #     active: False
            MDBoxLayout:
                orientation: 'vertical'
                size_hint_x: .2
                # width: '150dp'
                padding: [12]

                MDLabel:
                    # id: header_label
                    text: "[size=16sp]Â© 2024 NRB[/size]"
                    markup: True  # Enable markup for styling
                    halign: 'left'
                    color: app.theme_cls.primary_color
                    padding: [15, 5]
                    valign: 'middle'
                    

                MDLabel:
                    # id: header_label
                    text: "[size=16sp]Ver: 1.0.0[/size]"
                    markup: True  # Enable markup for styling
                    halign: 'left'
                    color: app.theme_cls.primary_color
                    padding: [15, 5]
                    valign: 'middle'

            MDLabel:
                id: notice
                text: ''
                halign: "center"
                theme_text_color: "Custom"
                text_color: 0, 1, 0, 1
                font_style: 'H5'

            MDBoxLayout:
                id: net_controls
                orientation: 'vertical'
                size_hint_x: .1
                # width: '150dp'
                padding: [12]

                # Network Status Icons
                MDBoxLayout:
                    orientation: 'horizontal'
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    spacing: '10dp'

                    MDIconButton:
                        icon: 'wifi' if root.network_status == 'connected' else 'wifi-off'
                        theme_text_color: 'Custom'
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        text_color: (0, 1, 0, 1) if root.network_status == 'connected' else (1, 0, 0, 1)

                    # MDIconButton:
                    #     icon: 'lan' if root.internet_status == 'connected' else 'lan-disconnect'
                    #     pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    #     theme_text_color: 'Custom'
                    #     text_color: (0, 1, 0, 1) if root.internet_status == 'connected' else (1, 0, 0, 1)

                    # MDIconButton:
                    #     icon: 'sync'
                    #     user_font_size: '64sp'
                    #     pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    #     on_release: app.change_screen('sync_view')  # Function to call on sync

            # MDLabel:
            #     size_hint_x: .005
