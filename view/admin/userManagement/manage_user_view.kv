#:kivy 2.3.0
# view/admin/userManagement/manage_user_view.kv

<ManageUser>:
    id: manage_user_view
    name: 'manage_user_view'
    orientation: "vertical"
        

    # Window Section
    MDBoxLayout:
        # adaptive_height: True
        md_bg_color: app.theme_cls.bg_light
        id: window_section
        name: "window_section"
        orientation: "vertical"
        padding: 0, 10
        # size_hint_y: .75
        height: self.minimum_height
        spacing: 20

        # Screen Title
        MDBoxLayout:
            orientation: 'horizontal'
            padding: '10dp'
            spacing: '10dp'
            size_hint_y: .1
            size_hint_x: .3
            # width: '300dp'
            pos_hint: {"center_x": .5, "center_y": .5}
            
            # Title
            MDLabel:
                id: screen_title
                text: 'Manage Users'
                halign: 'center'
                font_style: 'H4'
                size_hint_y: None
                # size_hint_x: None
                pos_hint: {"center_x": .5, "center_y": .5}
                # width: '300dp'

        # horizontal line
        MDSeparator:
            height: "1dp"  # Thickness of the line
            color: "#B0BEC5"  # Color of the line
            

        # Main Section
        MDBoxLayout:
            orientation: "horizontal"
            id: main_section
            name: "main_section"
            size_hint_y: .95
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            #Controls Section
            MDBoxLayout:
                orientation: "vertical"
                id: controls_section
                name: "controls_section"
                size_hint_x: .35
                # size_hint_y: .85
                padding: [10]
                spacing: 30

                MDCard:
                    elevation: 1
                    orientation: "vertical"


                    MDBoxLayout:
                        orientation: "vertical"
                        adaptive_height: True
                        size_hint_x: .8
                        size_hint_y: .8
                        # radius: [15, 15, 15, 15]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}

                        MDTextField:
                            id: id_no_field
                            mode: "rectangle"
                            hint_text: "ID Number"
                            max_text_length: 8
                            icon_right: "information"
                            # pos_hint: {"center_x": .5, "center_y": .5

                        MDTextField:
                            id: firstname_field
                            mode: "rectangle"
                            hint_text: "Firstname"
                        
                        MDTextField:
                            id: lastname_field
                            mode: "rectangle"
                            hint_text: "Surname"

                        MDTextField:
                            id: othernames_field
                            mode: "rectangle"
                            hint_text: "Other Names"

                        # Password Input with Eye Button using FloatLayout
                        FloatLayout:
                            # size_hint_x: .8
                            pos_hint: {"center_x": .5, "center_y": .5}
                            size_hint_y: None
                            height: dp(60)

                            # Password Input Field
                            MDTextField:
                                id: password_field
                                hint_text: "Enter password"
                                mode: "rectangle"
                                # required: True
                                # foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                                # text_color_normal: (0, 0, 0, 1)  # Text color
                                # text_color_focus: (0, 0, 0, 1)   # Text color when focused
                                # size_hint_x: 1  # Full width inside FloatLayout
                                pos_hint: {"center_y": .5, "right": 1}  # Position it on the right
                                height: dp(60)
                                icon_left: "key-variant"
                                multiline: False
                                font_size: '16sp'
                                password: True  # Initially, password field hides text
                                on_text_validate: root.validate_user()
                                # padding: [10, 5]

                            # Eye Icon Button placed on the right of the TextInput
                            MDIconButton:
                                icon: "eye-off"
                                pos_hint: {"center_y": .5, "right": 1}  # Position it on the right
                                on_release:
                                    # Toggle between showing/hiding the password
                                    self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                                    password_field.password = False if password_field.password else True
                                    password_field.focus = True

                        # Password Input with Eye Button using FloatLayout
                        FloatLayout:
                            # size_hint_x: .8
                            pos_hint: {"center_x": .5, "center_y": .5}
                            size_hint_y: None
                            height: dp(60)

                            # Password Input Field
                            MDTextField:
                                id: password_field1
                                hint_text: "Comfirm password"
                                mode: "rectangle"
                                # required: True
                                # foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                                # text_color_normal: (0, 0, 0, 1)  # Text color
                                # text_color_focus: (0, 0, 0, 1)   # Text color when focused
                                # size_hint_x: 1  # Full width inside FloatLayout
                                pos_hint: {"center_y": .5, "right": 1}  # Position it on the right
                                height: dp(60)
                                icon_left: "key-variant"
                                multiline: False
                                font_size: '16sp'
                                password: True  # Initially, password field hides text
                                on_text_validate: root.validate_user()
                                # padding: [10, 5]

                            # Eye Icon Button placed on the right of the TextInput
                            MDIconButton:
                                icon: "eye-off"
                                pos_hint: {"center_y": .5, "right": 1}  # Position it on the right
                                on_release:
                                    # Toggle between showing/hiding the password
                                    self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                                    password_field1.password = False if password_field1.password else True
                                    password_field1.focus = True

                        

                        MDTextField:
                            id: othernames_field
                            mode: "rectangle"
                            hint_text: "Role"
                            icon_right: "chevron-right"

                        
                        Label:
                            size_hint_y: .2

                        MDRaisedButton:
                            size_hint_x: .6
                            text: "Submit"
                            pos_hint: {"center_x": 0.5}

                        Label:
                            size_hint_y: .1

                   
                
                

                
            #Search results Section
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                size_hint_x: .65
                # size_hint_y: .95

                BoxLayout:
                    id: table_container
                    orientation: 'vertical'
                    padding: [10, 10, 10, 10]
                    size_hint_y: 1
                    
            