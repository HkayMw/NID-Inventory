#:kivy 2.3.0
# view/search_id/search_id_view.kv


<SearchIDScreen>:
    id: search_id_view
    name: 'search_id_view'
    orientation: "vertical"
    # space_x: self.size[0]/3
    # canvas.before:
    #     # Gray background
    #     Color:
    #         # rgba: (0.4, 0.4, 0.4, 1)
    #         rgba: app.theme_cls.bg_light


    #     Rectangle:
    #         size: self.size
    #         pos: self.pos
        

    # MDBoxLayout:
    #     orientation: "vertical"
    #     height: self.minimum_height

    # Window Section
    MDBoxLayout:
        # adaptive_height: True
        md_bg_color: app.theme_cls.bg_light
        id: window_section
        name: "window_section"
        orientation: "vertical"
        padding: 0, 10
        # size_hint_y: .75
        height: self.minimum_height
        spacing: 40

        # Main Section
        BoxLayout:
            orientation: "horizontal"
            id: main_section
            name: "main_section"
            size_hint_y: .9

            #Controls Section
            BoxLayout:
                orientation: "vertical"
                id: controls_section
                name: "controls_section"
                size_hint_x: .25
                spacing: 30

                Label:
                    id: someid
                    size_hint_y: .1

                #Search with ID number controls
                BoxLayout:
                    orientation: "horizontal"
                    size_hint_y: .15
                    size_hint_x: .9
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    # height: 50
                    padding: [5]
                    spacing: 10
                    canvas.before:
                        Color:
                            rgba: (0.7, 0.7, 0.7, 1)  # Dark teal color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [10, 10, 10, 10]  # Rounded corners

                    BoxLayout:
                        pos_hint: {'top': 1}
                        size_hint_x: .7
                        # size_hint_y: 
                        # height: 50
                        canvas.before:
                            Color:
                                rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                                radius: [10, 10, 10, 10]  # Rounded corners

                        TextInput:
                            id: id_no_field
                            hint_text: "ID Number"
                            foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                            background_color: (0, 0, 0, 0)  # Transparent to show canvas color
                            # size_hint_y: None
                            # height: 50
                            halign: 'center'
                            focus: True
                            multiline: False
                            font_size: min(self.width * .4, self.height * .4)  
                            padding: [10, (self.height - self.line_height) / 2]

                    #Search with ID number button
                    BoxLayout:
                        # size_hint_y: .1
                        size_hint_x: .3
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        # height: 50
                        padding: [5]
                        canvas.before:
                            Color:
                                rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                                radius: [10, 10, 10, 10]  # Rounded corners

                        Button:
                            text: "Submit"
                            background_normal: ''
                            background_color: (0.14, 0.31, 0.31, 1)  # Dark teal color
                            size_hint_x: 1
                            font_size: min(self.width * .4, self.height * .4)  
                            padding: [10, (self.height - self.line_height) / 2]
                            # height: 50
                            # radius: [10, 10, 10, 10]  # Rounded corners
                            color: 1, 1, 1, 1  # White text
                            on_press: root.search_id('id')

                # Search by name
                BoxLayout:
                    orientation: "vertical"
                    id: qr_code_container
                    size_hint_y: .35
                    size_hint_x: .9
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    # height: 50
                    padding: [5]
                    spacing: 10
                    canvas.before:
                        Color:
                            rgba: (0.7, 0.7, 0.7, 1)  # Dark teal color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [10, 10, 10, 10]  # Rounded corners
            
                    #first name row
                    BoxLayout:
                        orientation: "horizontal"
                        spacing: 10

                        #Firstname field
                        BoxLayout:
                            pos_hint: {'top': 1}
                            # size_hint_y: .5
                            size_hint_x: .7
                            # height: 50
                            canvas.before:
                                Color:
                                    rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                                RoundedRectangle:
                                    size: self.size
                                    pos: self.pos
                                    radius: [10, 10, 10, 10]  # Rounded corners

                            TextInput:
                                id: firstname_field
                                hint_text: "Firstname"
                                foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                                background_color: (0, 0, 0, 0)  # Transparent to show canvas color
                                # size_hint_y: None
                                # height: 50
                                halign: 'center'
                                focus: True
                                multiline: False
                                font_size: min(self.width * .4, self.height * .4)  
                                padding: [10, (self.height - self.line_height) / 2]

                        Label:
                            pos_hint: {'top': 1}
                            size_hint_x: .3
                            # size_hint_y: .5
                            # padding: 5

                    # Lastname and submit button row
                    BoxLayout:
                        orientation: "horizontal"
                        spacing: 10

                        # Lastname field
                        BoxLayout:
                            pos_hint: {'top': 1}
                            size_hint_x: .7
                            # size_hint_y: 
                            # height: 50
                            canvas.before:
                                Color:
                                    rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                                RoundedRectangle:
                                    size: self.size
                                    pos: self.pos
                                    radius: [10, 10, 10, 10]  # Rounded corners

                            TextInput:
                                id: lastname_field
                                hint_text: "Surname"
                                foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                                background_color: (0, 0, 0, 0)  # Transparent to show canvas color
                                # size_hint_y: None
                                # height: 50
                                halign: 'center'
                                focus: True
                                multiline: False
                                font_size: min(self.width * .4, self.height * .4)  
                                padding: [10, (self.height - self.line_height) / 2]

                        #Search with name submit button
                        BoxLayout:
                            # size_hint_y: .1
                            size_hint_x: .3
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                            # height: 50
                            padding: [5]
                            canvas.before:
                                Color:
                                    rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                                RoundedRectangle:
                                    size: self.size
                                    pos: self.pos
                                    radius: [10, 10, 10, 10]  # Rounded corners

                            Button:
                                text: "Submit"
                                background_normal: ''
                                background_color: (0.14, 0.31, 0.31, 1)  # Dark teal color
                                size_hint_x: 1
                                font_size: min(self.width * .4, self.height * .4)  
                                padding: [10, (self.height - self.line_height) / 2]
                                # height: 50
                                # radius: [10, 10, 10, 10]  # Rounded corners
                                color: 1, 1, 1, 1  # White text
                                on_press: root.search_id('name')

                # Search by scanning ID
                BoxLayout:
                    pos_hint: {'top': 1}
                    size_hint_y: .15
                    size_hint_x: .9
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    canvas.before:
                        Color:
                            rgba: (0.14, 0.31, 0.31, 1)  # Dark teal background
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [10, 10, 10, 10]  # Rounded corners

                    TextInput:
                        id: qr_code
                        hint_text: "Scan QR Code"
                        foreground_color: (0.7, 0.7, 0.7, 1)  # Light gray text
                        background_color: (0, 0, 0, 0)  # Transparent to show canvas color
                        # size_hint_y: None
                        # height: 50
                        halign: 'center'
                        focus: True
                        multiline: False
                        font_size: min(self.width * .4, self.height * .4)
                        padding: [10, (self.height - self.line_height) / 2]
                        on_text_validate: root.search_id('qr_code')

                Label:
                    size_hint_y:.25
            
            #Search results Section
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                size_hint_x: .75

                BoxLayout:
                    id: table_container
                    orientation: 'vertical'
                    padding: [10, 10, 10, 10]
                    size_hint_y: 1
                    # canvas.before:
                    #     Color:
                    #         rgba: 1, 0, 0, 0.5  # Semi-transparent red to visualize container
                    #     Rectangle:
                    #         pos: self.pos
                    #         size: self.size
                        
        
        
